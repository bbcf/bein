<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>bein.util</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="bein-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://bbcf.epfl.ch/bein">bein</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="bein-module.html">Package&nbsp;bein</a> ::
        Module&nbsp;util
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="bein.util-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module util</h1><p class="nomargin-top"></p>
<pre class="literalblock">

:mod:`bein.util` -- Library of functions for bein
=================================================

.. module:: bein.util
   :platform: Unix
   :synopsis: Useful programs and utilities for bein
.. moduleauthor:: Fred Ross &lt;madhadron at gmail dot com&gt;

This module is a repository of assorted robust functions that have
been developed for bein in day to day use.  Much of it is focused on
analysis of high throughput sequencing data, but if you have useful
functions for a different domain, please contribute them.

</pre>

<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#add_and_index_bam" class="summary-sig-name">add_and_index_bam</a>(<span class="summary-sig-arg">ex</span>,
        <span class="summary-sig-arg">bamfile</span>,
        <span class="summary-sig-arg">description</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">alias</span>=<span class="summary-sig-default">None</span>)</span><br />
      Indexes *bamfile* and adds it to the repository.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#add_bowtie_index" class="summary-sig-name">add_bowtie_index</a>(<span class="summary-sig-arg">execution</span>,
        <span class="summary-sig-arg">files</span>,
        <span class="summary-sig-arg">description</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">alias</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">index</span>=<span class="summary-sig-default">None</span>)</span><br />
      Adds an index of a list of FASTA files to the repository.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#add_figure" class="summary-sig-name">add_figure</a>(<span class="summary-sig-arg">*args</span>,
        <span class="summary-sig-arg">**kwds</span>)</span><br />
      Create a matplotlib figure and write it to the repository.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="add_hdf5"></a><span class="summary-sig-name">add_hdf5</span>(<span class="summary-sig-arg">*args</span>,
        <span class="summary-sig-arg">**kwds</span>)</span></td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#add_nh_flag" class="summary-sig-name">add_nh_flag</a>(<span class="summary-sig-arg">samfile</span>,
        <span class="summary-sig-arg">out</span>=<span class="summary-sig-default">None</span>)</span><br />
      Adds NH (Number of Hits) flag to each read alignment in *samfile*.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#add_pickle" class="summary-sig-name">add_pickle</a>(<span class="summary-sig-arg">execution</span>,
        <span class="summary-sig-arg">val</span>,
        <span class="summary-sig-arg">description</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">alias</span>=<span class="summary-sig-default">None</span>)</span><br />
      Pickle *val*, and add it to the repository.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#background" class="summary-sig-name">background</a>(<span class="summary-sig-arg">fun</span>,
        <span class="summary-sig-arg">*args</span>,
        <span class="summary-sig-arg">**kwargs</span>)</span><br />
      Run a function, but return a Future object instead of blocking.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#deepmap" class="summary-sig-name">deepmap</a>(<span class="summary-sig-arg">f</span>,
        <span class="summary-sig-arg">st</span>)</span><br />
      Map function *f* over a structure *st*.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#first_n_lines" class="summary-sig-name">first_n_lines</a>(<span class="summary-sig-arg">input_file</span>,
        <span class="summary-sig-arg">n</span>,
        <span class="summary-sig-arg">output_file</span>=<span class="summary-sig-default">None</span>)</span><br />
      Writes the first *n* lines of *input_file* to another file.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#parallel_bowtie" class="summary-sig-name">parallel_bowtie</a>(<span class="summary-sig-arg">ex</span>,
        <span class="summary-sig-arg">index</span>,
        <span class="summary-sig-arg">reads</span>,
        <span class="summary-sig-arg">n_lines</span>=<span class="summary-sig-default">1000000</span>,
        <span class="summary-sig-arg">bowtie_args</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">-Sra</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">add_nh_flags</span>=<span class="summary-sig-default">False</span>,
        <span class="summary-sig-arg">via</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">local</code><code class="variable-quote">'</code></span>)</span><br />
      Run bowtie in parallel on pieces of *reads*.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#parallel_bowtie_lsf" class="summary-sig-name">parallel_bowtie_lsf</a>(<span class="summary-sig-arg">ex</span>,
        <span class="summary-sig-arg">index</span>,
        <span class="summary-sig-arg">reads</span>,
        <span class="summary-sig-arg">n_lines</span>=<span class="summary-sig-default">1000000</span>,
        <span class="summary-sig-arg">bowtie_args</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">-Sra</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">add_nh_flags</span>=<span class="summary-sig-default">False</span>)</span><br />
      Deprecated.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="pause"></a><span class="summary-sig-name">pause</span>()</span><br />
      Pause until the user hits Return.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#read_sets" class="summary-sig-name">read_sets</a>(<span class="summary-sig-arg">reads</span>,
        <span class="summary-sig-arg">keep_unmapped</span>=<span class="summary-sig-default">False</span>)</span><br />
      Groups the alignments in a BAM file by read.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="bein.util-module.html#use_pickle" class="summary-sig-name">use_pickle</a>(<span class="summary-sig-arg">ex_or_lims</span>,
        <span class="summary-sig-arg">id_or_alias</span>)</span><br />
      Loads *id_or_alias* as a pickle file and returns the pickled objects.</td>
          <td align="right" valign="top">
            
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'bein'"><code class="variable-quote">'</code><code class="variable-string">bein</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="bam_to_sam"></a><span class="summary-name">bam_to_sam</span> = <code title="&lt;bein.program object at 0x106372550&gt;">&lt;bein.program object at 0x106372550&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="bowtie"></a><span class="summary-name">bowtie</span> = <code title="&lt;bein.program object at 0x1061b53d0&gt;">&lt;bein.program object at 0x1061b53d0&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="bowtie_build"></a><span class="summary-name">bowtie_build</span> = <code title="&lt;bein.program object at 0x1061b5450&gt;">&lt;bein.program object at 0x1061b5450&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="count_lines"></a><span class="summary-name">count_lines</span> = <code title="&lt;bein.program object at 0x1061b5310&gt;">&lt;bein.program object at 0x1061b5310&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="external_add_nh_flag"></a><span class="summary-name">external_add_nh_flag</span> = <code title="&lt;bein.program object at 0x106372490&gt;">&lt;bein.program object at 0x106372490&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="index_bam"></a><span class="summary-name">index_bam</span> = <code title="&lt;bein.program object at 0x106372650&gt;">&lt;bein.program object at 0x106372650&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="md5sum"></a><span class="summary-name">md5sum</span> = <code title="&lt;bein.program object at 0x1061b5290&gt;">&lt;bein.program object at 0x1061b5290&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="merge_bam"></a><span class="summary-name">merge_bam</span> = <code title="&lt;bein.program object at 0x106372690&gt;">&lt;bein.program object at 0x106372690&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="remove_lines_matching"></a><span class="summary-name">remove_lines_matching</span> = <code title="&lt;bein.program object at 0x1061b5250&gt;">&lt;bein.program object at 0x1061b5250&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="replace_bam_header"></a><span class="summary-name">replace_bam_header</span> = <code title="&lt;bein.program object at 0x106372590&gt;">&lt;bein.program object at 0x106372590&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="sam_to_bam"></a><span class="summary-name">sam_to_bam</span> = <code title="&lt;bein.program object at 0x106372510&gt;">&lt;bein.program object at 0x106372510&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="sleep"></a><span class="summary-name">sleep</span> = <code title="&lt;bein.program object at 0x1061b52d0&gt;">&lt;bein.program object at 0x1061b52d0&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="sort_bam"></a><span class="summary-name">sort_bam</span> = <code title="&lt;bein.program object at 0x1063725d0&gt;">&lt;bein.program object at 0x1063725d0&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="sort_bam_by_read"></a><span class="summary-name">sort_bam_by_read</span> = <code title="&lt;bein.program object at 0x106372610&gt;">&lt;bein.program object at 0x106372610&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="split_file"></a><span class="summary-name">split_file</span> = <code title="&lt;bein.program object at 0x1061b5350&gt;">&lt;bein.program object at 0x1061b5350&gt;</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="touch"></a><span class="summary-name">touch</span> = <code title="&lt;bein.program object at 0x1061b5210&gt;">&lt;bein.program object at 0x1061b5210&gt;</code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="add_and_index_bam"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_and_index_bam</span>(<span class="sig-arg">ex</span>,
        <span class="sig-arg">bamfile</span>,
        <span class="sig-arg">description</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">alias</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Indexes *bamfile* and adds it to the repository.</p>
  <p>The index created is properly associated to *bamfile* in the 
  repository, so when you use the BAM file later, the index will also be 
  copied into place with the correct name.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="add_bowtie_index"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_bowtie_index</span>(<span class="sig-arg">execution</span>,
        <span class="sig-arg">files</span>,
        <span class="sig-arg">description</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">alias</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">index</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Adds an index of a list of FASTA files to the repository.</p>
  <p>*files* is a list of filenames of FASTA files.  The files are indexed 
  with bowtie-build, then a placeholder is written to the repository, and 
  the six files of the bowtie index are associated to it.  Using the 
  placeholder in an execution will properly set up the whole index.</p>
  <p>*alias* is an optional alias to give to the whole index so it may be 
  referred to by name in future.  *index* lets you set the actual name of 
  the index created.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="add_figure"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_figure</span>(<span class="sig-arg">*args</span>,
        <span class="sig-arg">**kwds</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Create a matplotlib figure and write it to the repository.</p>
  <p>Use this as a with statement, for instance:</p>
<pre class="literalblock">
   with add_figure(ex, 'eps') as fig:
       hist(a)
       xlabel('Random things I found')
</pre>
  <p>This will plot a histogram of a with the x axis label set, and write 
  the plot to the repository as an EPS file.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="add_nh_flag"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_nh_flag</span>(<span class="sig-arg">samfile</span>,
        <span class="sig-arg">out</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Adds NH (Number of Hits) flag to each read alignment in *samfile*.</p>
  <p>Scans a BAM file ordered by read name, counts the number of 
  alternative alignments reported and writes them to a BAM file with the NH
  tag added.</p>
  <p>If *out* is ``None``, a random name is used.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="add_pickle"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_pickle</span>(<span class="sig-arg">execution</span>,
        <span class="sig-arg">val</span>,
        <span class="sig-arg">description</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">alias</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Pickle *val*, and add it to the repository.</p>
  <p>add_pickle lets you dump almost any Python value to a file in the 
  MiniLIMS repository.  It is useful to keep track of intermediate 
  calculations.  *description* will be set as the pickle file's 
  description.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="background"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">background</span>(<span class="sig-arg">fun</span>,
        <span class="sig-arg">*args</span>,
        <span class="sig-arg">**kwargs</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Run a function, but return a Future object instead of blocking.

Instead of blocking, it starts the function in a separate thread,
and returns an object which lets the user choose when to wait for
the function by calling its wait() method.  wait() blocks its
current thread until the function returns, then wait returns the
value returned by the function.

    f = background(sqrt, 0)
    a = f.wait()

is exactly equivalent to

    a = sqrt(0)

except that in the first case, sqrt is run in a separate thread.

The argument list after *fun* is exactly what you would pass to
*fun* if you were calling it directly, including keyword
arguments.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="deepmap"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">deepmap</span>(<span class="sig-arg">f</span>,
        <span class="sig-arg">st</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Map function *f* over a structure *st*.</p>
  <p>*f* should be a function of one argument.  *st* is a data structure 
  consisting of lists, tuples, and dictionaries.  *f* is applied to every 
  value in *st*.</p>
<pre class="py-doctest">
<span class="py-prompt">&gt;&gt;&gt; </span>deepmap(<span class="py-keyword">lambda</span> x: x, 1)
<span class="py-output">1</span>
<span class="py-output"></span><span class="py-prompt">&gt;&gt;&gt; </span>deepmap(<span class="py-keyword">lambda</span> x: x, [1, 2, 3])
<span class="py-output">[1, 2, 3]</span>
<span class="py-output"></span><span class="py-prompt">&gt;&gt;&gt; </span>deepmap(<span class="py-keyword">lambda</span> x: x+1, {<span class="py-string">'a'</span>: [1,2], <span class="py-string">'b'</span>: [3,4]})
<span class="py-output">{'a': [2, 3], 'b': [4, 5]}</span>
<span class="py-output"></span><span class="py-prompt">&gt;&gt;&gt; </span>deepmap(<span class="py-keyword">lambda</span> x: x, (1, 2, 3))
<span class="py-output">(1, 2, 3)</span>
<span class="py-output"></span><span class="py-prompt">&gt;&gt;&gt; </span>deepmap(<span class="py-keyword">lambda</span> x: x, {1: 2, 3: 4})
<span class="py-output">{1: 2, 3: 4}</span>
<span class="py-output"></span><span class="py-prompt">&gt;&gt;&gt; </span>deepmap(<span class="py-keyword">lambda</span> x: x, {1: (2, [3, 4, 5]), 2: {5: [1, 2], 6: (3, )}})
<span class="py-output">{1: (2, [3, 4, 5]), 2: {5: [1, 2], 6: (3,)}}</span></pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="first_n_lines"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">first_n_lines</span>(<span class="sig-arg">input_file</span>,
        <span class="sig-arg">n</span>,
        <span class="sig-arg">output_file</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Writes the first *n* lines of *input_file* to another file.</p>
  <p>If *output_file* is ``None``, then the output is written to a randomly
  named file.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="parallel_bowtie"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">parallel_bowtie</span>(<span class="sig-arg">ex</span>,
        <span class="sig-arg">index</span>,
        <span class="sig-arg">reads</span>,
        <span class="sig-arg">n_lines</span>=<span class="sig-default">1000000</span>,
        <span class="sig-arg">bowtie_args</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">-Sra</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">add_nh_flags</span>=<span class="sig-default">False</span>,
        <span class="sig-arg">via</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">local</code><code class="variable-quote">'</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Run bowtie in parallel on pieces of *reads*.</p>
  <p>Splits *reads* into chunks *n_lines* long, then runs bowtie with 
  arguments *bowtie_args* to map each chunk against *index*.  One of the 
  arguments needs to be -S so the output takes the form of SAM files, 
  because the results are converted to BAM and merged.  The filename of the
  single, merged BAM file is returned.</p>
  <p>Bowtie does not set the NH flag on its SAM file output.  If the 
  *add_nh_flags* argument is ``True``, this function calculates and adds 
  the flag before merging the BAM files.</p>
  <p>The *via* argument determines how the jobs will be run.  The default, 
  ``'local'``, runs them on the same machine in separate threads.  
  ``'lsf'`` submits them via LSF.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="parallel_bowtie_lsf"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">parallel_bowtie_lsf</span>(<span class="sig-arg">ex</span>,
        <span class="sig-arg">index</span>,
        <span class="sig-arg">reads</span>,
        <span class="sig-arg">n_lines</span>=<span class="sig-default">1000000</span>,
        <span class="sig-arg">bowtie_args</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">-Sra</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">add_nh_flags</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Deprecated.  Use parallel_bowtie with ``via=&quot;lsf&quot;`` 
  instead.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="read_sets"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">read_sets</span>(<span class="sig-arg">reads</span>,
        <span class="sig-arg">keep_unmapped</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Groups the alignments in a BAM file by read.

*reads* should be an iterator over reads, such as the object
 returned by pysam.Samfile.  The SAM/BAM file must be sorted by
 read.  ``read_sets`` removes all unmapped reads, and returns an
 iterator over lists of all AlignedRead objects consisting of the
 same read.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="use_pickle"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">use_pickle</span>(<span class="sig-arg">ex_or_lims</span>,
        <span class="sig-arg">id_or_alias</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    >&nbsp;
    </td>
  </tr></table>
  
  <p>Loads *id_or_alias* as a pickle file and returns the pickled 
  objects.</p>
  <p>*ex_or_lims* may be either an execution object or a MiniLIMS 
  object.</p>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="bein-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://bbcf.epfl.ch/bein">bein</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Wed Aug 31 20:08:09 2011
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
